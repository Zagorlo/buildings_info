/* Всё одним коммитом, всё в одной ветке. Т.к. работал один (ха!), то мне так было проще. */

Должен быть поднят докер на локалхосте. 1.5. Поднимаем постгрю: из корня проекта docker-compose up --build --force-recreate --remove-orphans (название у образа buildings_postgres, конфликтов, по идее, быть не должно)

Запускаем мэйн. Сервис сам добавит (очень немного) тестовых данных.

Запросы:

а) Добавление инфы POST http://localhost:1001/api/v1/building/insert Тело { "id":-555, // при вставке обулится, база сама проставит; можно не передавать "name":"113", // длина больше 2 "floors_count":7, // строго положительно "parking_count":0, // не может быть положительным, если parking_available = false "parking_available":true }

б) Обновление инфы PUT http://localhost:1001/api/v1/building/update Тело { "id":6, "name":"114", "floors_count":7, "parking_count":0, "parking_available":true }

Если айди не существует в базе, весьма жаль. (выкинет ошибку)

в) Получение последних изменений: GET http://localhost:1001/api/v1/changes Ответ [ { "id": 6, "field_name": "name", // какая колонка изменилась "old_value": "113", // значение колонки до обновления "new_value": "114", // ==|== после обновления "updated_at": "2021-08-10T18:09:04.119552+03:00" // дата и время обновления }, { "id": 6, "field_name": "name", "old_value": null, "new_value": "113", "updated_at": "2021-08-10T18:08:48.702104+03:00" }, ... ]

Тесты: go test -cover ./... Тесты сами запустят тестовые контейнеры и инициализируют данными.
